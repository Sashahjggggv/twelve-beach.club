/*!
	Modaal - accessible modals - v0.4.4
	by Humaan, for all humans.
	http://humaan.com
 */
!function(a){var t={init:function(t,e){var o=this;if(o.dom=a("body"),o.$elem=a(e),o.options=a.extend({},a.fn.modaal.options,o.$elem.data(),t),o.xhr=null,o.scope={is_open:!1,id:"modaal_"+(new Date).getTime()+Math.random().toString(16).substring(2),source:o.options.content_source?o.options.content_source:o.$elem.attr("href")},o.$elem.attr("data-modaal-scope",o.scope.id),o.private_options={active_class:"is_active"},o.lastFocus=null,o.options.is_locked||"confirm"==o.options.type||o.options.hide_close?o.scope.close_btn="":o.scope.close_btn='<button type="button" class="modaal-close" id="modaal-close" aria-label="'+o.options.close_aria_label+'"><span>'+o.options.close_text+"</span></button>","none"===o.options.animation&&(o.options.animation_speed=0,o.options.after_callback_delay=0),a(e).on("click.Modaal",(function(a){a.preventDefault(),o.create_modaal(o,a)})),!0===o.options.outer_controls)var i="outer";else i="inner";o.scope.prev_btn='<button type="button" class="modaal-gallery-control modaal-gallery-prev modaal-gallery-prev-'+i+'" id="modaal-gallery-prev" aria-label="Previous image (use left arrow to change)"><span>Previous Image</span></button>',o.scope.next_btn='<button type="button" class="modaal-gallery-control modaal-gallery-next modaal-gallery-next-'+i+'" id="modaal-gallery-next" aria-label="Next image (use right arrow to change)"><span>Next Image</span></button>',!0===o.options.start_open&&o.create_modaal(o)},create_modaal:function(a,t){var e;if((a=this).lastFocus=a.$elem,!1!==a.options.should_open&&("function"!=typeof a.options.should_open||!1!==a.options.should_open())){switch(a.options.before_open.call(a,t),a.options.type){case"inline":a.create_basic();break;case"ajax":e=a.options.source(a.$elem,a.scope.source),a.fetch_ajax(e);break;case"confirm":a.options.is_locked=!0,a.create_confirm();break;case"image":a.create_image();break;case"iframe":e=a.options.source(a.$elem,a.scope.source),a.create_iframe(e);break;case"video":a.create_video(a.scope.source);break;case"instagram":a.create_instagram()}a.watch_events()}},watch_events:function(){var t=this;t.dom.off("click.Modaal keyup.Modaal keydown.Modaal"),t.dom.on("keydown.Modaal",(function(e){var o=e.keyCode,i=e.target;9==o&&t.scope.is_open&&(a.contains(document.getElementById(t.scope.id),i)||a("#"+t.scope.id).find('*[tabindex="0"]').focus())})),t.dom.on("keyup.Modaal",(function(e){var o=e.keyCode,i=e.target;return e.shiftKey&&9==e.keyCode&&t.scope.is_open&&(a.contains(document.getElementById(t.scope.id),i)||a("#"+t.scope.id).find(".modaal-close").focus()),!t.options.is_locked&&27==o&&t.scope.is_open?!a(document.activeElement).is("input:not(:checkbox):not(:radio)")&&void t.modaal_close():"image"==t.options.type?(37==o&&t.scope.is_open&&!a("#"+t.scope.id+" .modaal-gallery-prev").hasClass("is_hidden")&&t.gallery_update("prev"),void(39==o&&t.scope.is_open&&!a("#"+t.scope.id+" .modaal-gallery-next").hasClass("is_hidden")&&t.gallery_update("next"))):void 0})),t.dom.on("click.Modaal",(function(e){var o=a(e.target);if(t.options.is_locked||!(t.options.overlay_close&&o.is(".modaal-inner-wrapper")||o.is(".modaal-close")||o.closest(".modaal-close").length)){if(o.is(".modaal-confirm-btn"))return o.is(".modaal-ok")&&t.options.confirm_callback.call(t,t.lastFocus),o.is(".modaal-cancel")&&t.options.confirm_cancel_callback.call(t,t.lastFocus),void t.modaal_close();if(o.is(".modaal-gallery-control")){if(o.hasClass("is_hidden"))return;return o.is(".modaal-gallery-prev")&&t.gallery_update("prev"),void(o.is(".modaal-gallery-next")&&t.gallery_update("next"))}}else t.modaal_close()}))},build_modal:function(t){var e="";"instagram"===this.options.type&&(e=" modaal-instagram");var o,i="video"===this.options.type?"modaal-video-wrap":"modaal-content";switch(this.options.animation){case"fade":o=" modaal-start_fade";break;case"slide-down":o=" modaal-start_slidedown";break;default:o=" modaal-start_none"}var l="";this.options.fullscreen&&(l=" modaal-fullscreen"),""===this.options.custom_class&&void 0===this.options.custom_class||(this.options.custom_class=" "+this.options.custom_class);var s="";this.options.width&&this.options.height&&"number"==typeof this.options.width&&"number"==typeof this.options.height?s=' style="max-width:'+this.options.width+"px;height:"+this.options.height+'px;overflow:auto;"':this.options.width&&"number"==typeof this.options.width?s=' style="max-width:'+this.options.width+'px;"':this.options.height&&"number"==typeof this.options.height&&(s=' style="height:'+this.options.height+'px;overflow:auto;"'),("image"===this.options.type||"video"===this.options.type||"instagram"===this.options.type||this.options.fullscreen)&&(s="");var n="";this.is_touch()&&(n=' style="cursor:pointer;"');var d='<div class="modaal-wrapper elementor-'+this.options.postid+" modaal-"+this.options.type+o+e+l+this.options.custom_class+'" id="'+this.scope.id+'"><div class="modaal-outer-wrapper elementor-section elementor-element elementor-element-'+this.options.widgetid+'"><div class="modaal-inner-wrapper"'+n+">";"video"!==this.options.type&&(d+='<div class="modaal-container"'+s+">"),d+='<div class="'+i+' modaal-focus" aria-hidden="false" aria-label="'+this.options.accessible_title+" - "+this.options.close_aria_label+'" role="dialog">',"inline"===this.options.type?d+='<div class="modaal-content-container" role="document"></div>':d+=t,d+="</div>"+this.scope.close_btn,"video"!==this.options.type&&(d+="</div>"),d+="</div>","image"===this.options.type&&!0===this.options.outer_controls&&(d+=this.scope.prev_btn+this.scope.next_btn),d+="</div></div>",a("#"+this.scope.id+"_overlay").length<1&&this.dom.append(d),"inline"===this.options.type&&t.appendTo("#"+this.scope.id+" .modaal-content-container"),this.modaal_overlay("show")},create_basic:function(){var t=a(this.scope.source),e="";t.length?(e=t.contents().detach(),t.empty()):e="Content could not be loaded. Please check the source and try again.",this.build_modal(e)},create_instagram:function(){var t=this,e=t.options.instagram_id,o="",i="Instagram photo couldn't be loaded, please check the embed code and try again.";if(t.build_modal('<div class="modaal-content-container'+(""!==t.options.loading_class?" "+t.options.loading_class:"")+'">'+t.options.loading_content+"</div>"),""!==e&&null!=e){var l="https://api.instagram.com/oembed?url=http://instagr.am/p/"+e+"/";a.ajax({url:l,dataType:"jsonp",cache:!1,success:function(e){t.dom.append('<div id="temp-ig" style="width:0;height:0;overflow:hidden;">'+e.html+"</div>"),t.dom.attr("data-igloaded")?window.instgrm.Embeds.process():t.dom.attr("data-igloaded","true");var o="#"+t.scope.id+" .modaal-content-container";a(o).length>0&&setTimeout((function(){a("#temp-ig").contents().clone().appendTo(o),a("#temp-ig").remove()}),1e3)},error:function(){o=i;var e=a("#"+t.scope.id+" .modaal-content-container");e.length>0&&(e.removeClass(t.options.loading_class).addClass(t.options.ajax_error_class),e.html(o))}})}else o=i;return!1},fetch_ajax:function(t){var e=this;null==e.options.accessible_title&&(e.options.accessible_title="Dialog Window"),null!==e.xhr&&(e.xhr.abort(),e.xhr=null),e.build_modal('<div class="modaal-content-container'+(""!=e.options.loading_class?" "+e.options.loading_class:"")+'">'+e.options.loading_content+"</div>"),e.xhr=a.ajax(t,{success:function(t){var o=a("#"+e.scope.id).find(".modaal-content-container");o.length>0&&(o.removeClass(e.options.loading_class),o.html(t),e.options.ajax_success.call(e,o))},error:function(t){if("abort"!==t.statusText){var o=a("#"+e.scope.id+" .modaal-content-container");o.length>0&&(o.removeClass(e.options.loading_class).addClass(e.options.ajax_error_class),o.html("Content could not be loaded. Please check the source and try again."))}}})},create_confirm:function(){var a;a='<div class="modaal-content-container"><h1 id="modaal-title">'+this.options.confirm_title+'</h1><div class="modaal-confirm-content">'+this.options.confirm_content+'</div><div class="modaal-confirm-wrap"><button type="button" class="modaal-confirm-btn modaal-ok" aria-label="Confirm">'+this.options.confirm_button_text+'</button><button type="button" class="modaal-confirm-btn modaal-cancel" aria-label="Cancel">'+this.options.confirm_cancel_button_text+"</button></div></div></div>",this.build_modal(a)},create_image:function(){var t,e,o="";if(this.$elem.is("[data-group]")||this.$elem.is("[rel]")){var i=this.$elem.is("[data-group]"),l=i?this.$elem.attr("data-group"):this.$elem.attr("rel"),s=a(i?'[data-group="'+l+'"]':'[rel="'+l+'"]');s.removeAttr("data-gallery-active","is_active"),this.$elem.attr("data-gallery-active","is_active"),e=s.length-1;var n=[];o='<div class="modaal-gallery-item-wrap">',s.each((function(t,e){var o="",i="",l="",s=!1,d=!1,r=e.getAttribute("data-modaal-desc"),c=e.getAttribute("data-gallery-active");a(e).attr("data-modaal-content-source")?o=a(e).attr("data-modaal-content-source"):a(e).attr("href")?o=a(e).attr("href"):a(e).attr("src")?o=a(e).attr("src"):(o="trigger requires href or data-modaal-content-source attribute",d=!0),""!==r&&null!=r?(i=r,l='<div class="modaal-gallery-label"><span class="modaal-accessible-hide">Image '+(t+1)+" - </span>"+r.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</div>"):l='<div class="modaal-gallery-label"><span class="modaal-accessible-hide">Image '+(t+1)+"</span></div>",c&&(s=!0);var m={url:o,alt:i,rawdesc:r,desc:l,active:s,src_error:d};n.push(m)}));for(var d=0;d<n.length;d++){var r="",c=n[d].rawdesc?"Image: "+n[d].rawdesc:"Image "+d+" no description";n[d].active&&(r=" "+this.private_options.active_class),o+='<div class="modaal-gallery-item gallery-item-'+d+r+'" aria-label="'+c+'">'+(n[d].src_error?n[d].url:'<img src="'+n[d].url+'" alt=" " style="width:100%">')+n[d].desc+"</div>"}o+="</div>",!0!==this.options.outer_controls&&(o+=this.scope.prev_btn+this.scope.next_btn)}else{var m,p=!1;this.$elem.attr("data-modaal-content-source")?m=this.$elem.attr("data-modaal-content-source"):this.$elem.attr("href")?m=this.$elem.attr("href"):this.$elem.attr("src")?m=this.$elem.attr("src"):(m="trigger requires href or data-modaal-content-source attribute",p=!0);var h="";c="";this.$elem.attr("data-modaal-desc")?(c=this.$elem.attr("data-modaal-desc"),h='<div class="modaal-gallery-label"><span class="modaal-accessible-hide">Image - </span>'+this.$elem.attr("data-modaal-desc").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</div>"):c="Image with no description",o='<div class="modaal-gallery-item is_active" aria-label="'+c+'">'+(p?m:'<img src="'+m+'" alt=" " style="width:100%">')+h+"</div>"}t=o,this.build_modal(t),a(".modaal-gallery-item.is_active").is(".gallery-item-0")&&a(".modaal-gallery-prev").hide(),a(".modaal-gallery-item.is_active").is(".gallery-item-"+e)&&a(".modaal-gallery-next").hide()},gallery_update:function(t){var e=this,o=a("#"+e.scope.id),i=o.find(".modaal-gallery-item").length-1;if(0==i)return!1;var l=o.find(".modaal-gallery-prev"),s=o.find(".modaal-gallery-next"),n=0,d=0,r=o.find(".modaal-gallery-item."+e.private_options.active_class),c="next"==t?r.next(".modaal-gallery-item"):r.prev(".modaal-gallery-item");return e.options.before_image_change.call(e,r,c),("prev"!=t||!o.find(".gallery-item-0").hasClass("is_active"))&&(("next"!=t||!o.find(".gallery-item-"+i).hasClass("is_active"))&&void r.stop().animate({opacity:0},250,(function(){c.addClass("is_next").css({position:"absolute",display:"block",opacity:0});var t=a(document).width(),m=t>1140?280:50;n=o.find(".modaal-gallery-item.is_next").width(),d=o.find(".modaal-gallery-item.is_next").height();var p=o.find(".modaal-gallery-item.is_next img").prop("naturalWidth"),h=o.find(".modaal-gallery-item.is_next img").prop("naturalHeight");p>t-m?(n=t-m,o.find(".modaal-gallery-item.is_next").css({width:n}),o.find(".modaal-gallery-item.is_next img").css({width:n}),d=o.find(".modaal-gallery-item.is_next").find("img").height()):(n=p,d=h),o.find(".modaal-gallery-item-wrap").stop().animate({width:n,height:d},250,(function(){r.removeClass(e.private_options.active_class+" "+e.options.gallery_active_class).removeAttr("style"),r.find("img").removeAttr("style"),c.addClass(e.private_options.active_class+" "+e.options.gallery_active_class).removeClass("is_next").css("position",""),c.stop().animate({opacity:1},250,(function(){a(this).removeAttr("style").css({width:"100%"}),a(this).find("img").css("width","100%"),o.find(".modaal-gallery-item-wrap").removeAttr("style"),e.options.after_image_change.call(e,c)})),o.find(".modaal-gallery-item").removeAttr("tabindex"),o.find(".modaal-gallery-item."+e.private_options.active_class).attr("tabindex","0").focus(),o.find(".modaal-gallery-item."+e.private_options.active_class).is(".gallery-item-0")?l.stop().animate({opacity:0},150,(function(){a(this).hide()})):l.stop().css({display:"block",opacity:l.css("opacity")}).animate({opacity:1},150),o.find(".modaal-gallery-item."+e.private_options.active_class).is(".gallery-item-"+i)?s.stop().animate({opacity:0},150,(function(){a(this).hide()})):s.stop().css({display:"block",opacity:l.css("opacity")}).animate({opacity:1},150)}))})))},create_video:function(a){var t;t='<iframe src="'+a+'" class="modaal-video-frame" frameborder="0" allowfullscreen></iframe>',this.build_modal('<div class="modaal-video-container">'+t+"</div>")},create_iframe:function(a){var t;t=null!==this.options.width||void 0!==this.options.width||null!==this.options.height||void 0!==this.options.height?'<iframe src="'+a+'" class="modaal-iframe-elem" frameborder="0" allowfullscreen></iframe>':'<div class="modaal-content-container">Please specify a width and height for your iframe</div>',this.build_modal(t)},modaal_open:function(){var t=this,e=a("#"+t.scope.id),o=t.options.animation;"none"===o&&(e.removeClass("modaal-start_none"),t.options.after_open.call(t,e)),"fade"===o&&e.removeClass("modaal-start_fade"),"slide-down"===o&&e.removeClass("modaal-start_slide_down");a(".modaal-wrapper *[tabindex=0]").removeAttr("tabindex"),("image"==t.options.type?a("#"+t.scope.id).find(".modaal-gallery-item."+t.private_options.active_class):e.find(".modaal-iframe-elem").length?e.find(".modaal-iframe-elem"):e.find(".modaal-video-wrap").length?e.find(".modaal-video-wrap"):e.find(".modaal-focus")).attr("tabindex","0").focus(),"none"!==o&&setTimeout((function(){t.options.after_open.call(t,e)}),t.options.after_callback_delay)},modaal_close:function(){var t=this,e=a("#"+t.scope.id);t.options.before_close.call(t,e),null!==t.xhr&&(t.xhr.abort(),t.xhr=null),"none"===t.options.animation&&e.addClass("modaal-start_none"),"fade"===t.options.animation&&e.addClass("modaal-start_fade"),"slide-down"===t.options.animation&&e.addClass("modaal-start_slide_down"),setTimeout((function(){"inline"==t.options.type&&a("#"+t.scope.id+" .modaal-content-container").contents().detach().appendTo(t.scope.source),e.remove(),t.options.after_close.call(t),t.scope.is_open=!1}),t.options.after_callback_delay),t.modaal_overlay("hide"),null!=t.lastFocus&&t.lastFocus.focus()},modaal_overlay:function(t){var e=this;"show"==t?(e.scope.is_open=!0,e.options.background_scroll||e.dom.addClass("modaal-noscroll"),a("#"+e.scope.id+"_overlay").length<1&&e.dom.append('<div class="modaal-overlay" id="'+e.scope.id+'_overlay"></div>'),a("#"+e.scope.id+"_overlay").css("background",e.options.background).stop().animate({opacity:e.options.overlay_opacity},e.options.animation_speed,(function(){e.modaal_open()}))):"hide"==t&&a("#"+e.scope.id+"_overlay").stop().animate({opacity:0},e.options.animation_speed,(function(){a(this).remove(),e.dom.removeClass("modaal-noscroll")}))},is_touch:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},e=[];function o(a){var t={},e=!1;a.attr("data-modaal-type")&&(e=!0,t.type=a.attr("data-modaal-type")),a.attr("data-modaal-content-source")&&(e=!0,t.content_source=a.attr("data-modaal-content-source")),a.attr("data-modaal-animation")&&(e=!0,t.animation=a.attr("data-modaal-animation")),a.attr("data-modaal-animation-speed")&&(e=!0,t.animation_speed=a.attr("data-modaal-animation-speed")),a.attr("data-modaal-after-callback-delay")&&(e=!0,t.after_callback_delay=a.attr("data-modaal-after-callback-delay")),a.attr("data-modaal-is-locked")&&(e=!0,t.is_locked="true"===a.attr("data-modaal-is-locked")),a.attr("data-modaal-hide-close")&&(e=!0,t.hide_close="true"===a.attr("data-modaal-hide-close")),a.attr("data-modaal-background")&&(e=!0,t.background=a.attr("data-modaal-background")),a.attr("data-modaal-overlay-opacity")&&(e=!0,t.overlay_opacity=a.attr("data-modaal-overlay-opacity")),a.attr("data-modaal-overlay-close")&&(e=!0,t.overlay_close="false"!==a.attr("data-modaal-overlay-close")),a.attr("data-modaal-accessible-title")&&(e=!0,t.accessible_title=a.attr("data-modaal-accessible-title")),a.attr("data-modaal-start-open")&&(e=!0,t.start_open="true"===a.attr("data-modaal-start-open")),a.attr("data-modaal-fullscreen")&&(e=!0,t.fullscreen="true"===a.attr("data-modaal-fullscreen")),a.attr("data-modaal-custom-class")&&(e=!0,t.custom_class=a.attr("data-modaal-custom-class")),a.attr("data-modaal-close-text")&&(e=!0,t.close_text=a.attr("data-modaal-close-text")),a.attr("data-modaal-close-aria-label")&&(e=!0,t.close_aria_label=a.attr("data-modaal-close-aria-label")),a.attr("data-modaal-background-scroll")&&(e=!0,t.background_scroll="true"===a.attr("data-modaal-background-scroll")),a.attr("data-modaal-width")&&(e=!0,t.width=parseInt(a.attr("data-modaal-width"))),a.attr("data-modaal-height")&&(e=!0,t.height=parseInt(a.attr("data-modaal-height"))),a.attr("data-modaal-confirm-button-text")&&(e=!0,t.confirm_button_text=a.attr("data-modaal-confirm-button-text")),a.attr("data-modaal-confirm-cancel-button-text")&&(e=!0,t.confirm_cancel_button_text=a.attr("data-modaal-confirm-cancel-button-text")),a.attr("data-modaal-confirm-title")&&(e=!0,t.confirm_title=a.attr("data-modaal-confirm-title")),a.attr("data-modaal-confirm-content")&&(e=!0,t.confirm_content=a.attr("data-modaal-confirm-content")),a.attr("data-modaal-gallery-active-class")&&(e=!0,t.gallery_active_class=a.attr("data-modaal-gallery-active-class")),a.attr("data-modaal-loading-content")&&(e=!0,t.loading_content=a.attr("data-modaal-loading-content")),a.attr("data-modaal-loading-class")&&(e=!0,t.loading_class=a.attr("data-modaal-loading-class")),a.attr("data-modaal-ajax-error-class")&&(e=!0,t.ajax_error_class=a.attr("data-modaal-ajax-error-class")),a.attr("data-modaal-instagram-id")&&(e=!0,t.instagram_id=a.attr("data-modaal-instagram-id")),e&&a.modaal(t)}a.fn.modaal=function(o){return this.each((function(i){var l=a(this).data("modaal");if(l){if("string"==typeof o)switch(o){case"open":l.create_modaal(l);break;case"close":l.modaal_close()}}else{var s=Object.create(t);s.init(o,this),a.data(this,"modaal",s),e.push({element:a(this).attr("class"),options:o})}}))},a.fn.modaal.options={type:"inline",content_source:null,animation:"fade",animation_speed:300,after_callback_delay:350,is_locked:!1,hide_close:!1,background:"#000",overlay_opacity:"0.8",overlay_close:!0,accessible_title:"Dialog Window",start_open:!1,fullscreen:!1,custom_class:"",background_scroll:!1,should_open:!0,close_text:"Close",close_aria_label:"Close (Press escape to close)",width:null,height:null,before_open:function(){},after_open:function(){},before_close:function(){},after_close:function(){},source:function(a,t){return t},confirm_button_text:"Confirm",confirm_cancel_button_text:"Cancel",confirm_title:"Confirm Title",confirm_content:"<p>This is the default confirm dialog content. Replace me through the options</p>",confirm_callback:function(){},confirm_cancel_callback:function(){},gallery_active_class:"gallery_active_item",outer_controls:!1,before_image_change:function(a,t){},after_image_change:function(a){},loading_content:'<div class="modaal-loading-spinner"><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div></div>',loading_class:"is_loading",ajax_error_class:"modaal-error",ajax_success:function(){},instagram_id:null},a((function(){var t=a(".modaal");t.length&&t.each((function(){o(a(this))}));var i=new MutationObserver((function(t){t.forEach((function(t){if(t.addedNodes&&t.addedNodes.length>0)[].some.call(t.addedNodes,(function(t){var i=a(t);(i.is("a")||i.is("button"))&&(i.hasClass("modaal")?o(i):e.forEach((function(t){if(t.element==i.attr("class"))return a(i).modaal(t.options),!1})))}))}))})),l={subtree:!0,attributes:!0,childList:!0,characterData:!0};setTimeout((function(){i.observe(document.body,l)}),500)}))}(jQuery,window,document);